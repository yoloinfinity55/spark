
Title: Project Specification: Post2Static
Date: 2025-10-13
Author: minijohn
Tags: project, specification, pelican, python, postgresql
Slug: project-specification-post2static
Summary: A detailed specification of the Post2Static project, a static site generator powered by Pelican and PostgreSQL.

## Introduction

This document outlines the project specification for Post2Static, a system designed to generate a static website from content stored in a PostgreSQL database. The project leverages the power of Pelican, a static site generator written in Python, to create a fast, secure, and easily deployable website.

## Core Technologies

The project is built upon the following core technologies:

*   **Python:** The primary programming language for scripting and automation.
*   **Pelican:** A static site generator that converts Markdown files into HTML.
*   **PostgreSQL:** A powerful, open-source object-relational database system used as the content source.
*   **doit:** A Python-based task runner for automating the build and deployment process.
*   **Invoke:** Another Python-based task runner for development and automation.
*   **Markdown:** The markup language for writing blog posts.
*   **Jinja2:** The templating engine used by Pelican.

## Project Structure

The project is organized into the following key directories and files:

*   `content/`: Contains the Markdown files that are the source for the blog posts. These files are generated by the `export_posts.py` script.
*   `data_export/`: Contains the Python script (`export_posts.py`) responsible for exporting content from the PostgreSQL database.
*   `site/`: The output directory where the generated static HTML, CSS, and JavaScript files are placed.
*   `dodo.py`: The main task automation file, using the `doit` library. It defines the workflow for exporting, building, and deploying the site.
*   `tasks.py`: An alternative task automation file, using the `invoke` library.
*   `pelicanconf.py`: The main configuration file for Pelican.
*   `publishconf.py`: A configuration file for publishing the site, which typically includes production-specific settings.
*   `requirements.txt`: A list of Python dependencies for the project.

## Workflow

The workflow for creating and publishing content is as follows:

1.  **Content Creation:** Content is created and managed in a PostgreSQL database.
2.  **Export:** The `doit export` command is run, which executes the `data_export/export_posts.py` script. This script connects to the PostgreSQL database, fetches the posts, and converts them into Markdown files in the `content/` directory.
3.  **Build:** The `doit build` command is run, which invokes Pelican to generate the static site from the Markdown files. The output is placed in the `site/` directory.
4.  **Serve/Preview:** The site can be previewed locally by running `doit serve` or `doit devserver`.
5.  **Deploy:** The site is deployed to GitHub Pages using the `doit deploy` command.

## `doit` Tasks

The `dodo.py` file defines the following tasks for managing the site:

*   `export`: Exports posts from the PostgreSQL database to Markdown files.
*   `build`: Builds the static site using Pelican.
*   `serve`: Serves the site locally on port 8000.
*   `cleanup`: Cleans up generated files, including the `site/` and `cache/` directories, and all Markdown files in `content/`.
*   `devserver`: Runs the Pelican development server with auto-reload functionality.
*   `deploy`: Deploys the site to GitHub Pages.
